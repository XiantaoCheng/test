<!--
+[返回目录]

LaTeX数学记号::https://oeis.org/wiki/List_of_LaTeX_mathematical_symbols
+[打开](,LaTeX数学记号)
-->

<html>
  <head>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
%[结构语言核心JS]


<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
* {
  box-sizing: border-box;
  font-family: Arial, Helvetica, sans-serif;
}

body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
}

/* Style the top navigation bar */
.topnav {
  overflow: hidden;
  background-color: #333;
}

/* Style the topnav links */
.topnav a {
  float: left;
  display: block;
  color: #f2f2f2;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
}

/* Change color on hover */
.topnav a:hover {
  background-color: #ddd;
  color: black;
}


/* Style the content */
.content {
  background-color: #fff;
  padding: 10px;
}

/*
+[网页](web,实验室日历模板)
*/

/* Style the footer */
.footer {
  background-color: #333;
  padding: 10px;
  margin-top: 20px
}

.footer p {
  color: #ddd
}

</style>


  </head>


<body>
<div class="topnav">
  <a href="#">Link</a>
  <a href="#">Link</a>
  <a href="#">Link</a>
</div>


<div class="content">
    <p><mathjax style=\"font-size:1.5em\">
<!--
+[H函数](,代码)
-->


<svg id="viewer" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 1000 440.8340845843295" style="overflow: hidden;border: 2px solid #888888;"> 

<polygon id="line_an_3" points="103.511367108646, 346.85518413890486 235.4995492494022, 411.44514561204096" style="fill:rgb(0,0,0);stroke:black;stroke-width:5;fill-rule:evenodd;" />
<polygon id="line_an_2" points="235.4995492494022, 411.44514561204096 940.8340845843295, 293.88938972288634 59.165915415670455, 440.8340845843295" style="fill:rgb(0,0,0);stroke:black;stroke-width:5;fill-rule:evenodd;" />
<polygon id="line_an_1" points="235.4995492494022, 411.44514561204096 499.99999999999994, 146.94469486144317 646.9446948614432, 0.0" style="fill:rgb(0,0,0);stroke:black;stroke-width:5;fill-rule:evenodd;" />
<circle id="pt_4" onclick="loadDragFunc('pt_4')" cx="940.8340845843295" cy="293.88938972288634" r="10" style="fill:rgb(0,0,0);stroke:rgb(0,0,0);stroke-width:5;fill-rule:evenodd;" />
<circle id="pt_5" onclick="loadDragFunc('pt_5')" cx="59.165915415670455" cy="440.8340845843295" r="10" style="fill:rgb(0,0,0);stroke:rgb(0,0,0);stroke-width:5;fill-rule:evenodd;" />
<circle id="pt_1" onmousedown="loadDragFunc('pt_1')" cx="103.511367108646" cy="346.85518413890486" r="10" style="fill:rgb(0,0,0);stroke:rgb(0,0,0);stroke-width:5;fill-rule:evenodd;" />
<circle id="pt_6" onmousedown="loadDragFunc('pt_6')" cx="235.4995492494022" cy="411.44514561204096" r="10" style="fill:rgb(0,0,0);stroke:rgb(0,0,0);stroke-width:5;fill-rule:evenodd;" />
<circle id="pt_2" onmousedown="loadDragFunc('pt_2')" cx="499.99999999999994" cy="146.94469486144317" r="10" style="fill:rgb(0,0,0);stroke:rgb(0,0,0);stroke-width:5;fill-rule:evenodd;" />
<circle id="pt_3" onmousedown="loadDragFunc('pt_3')" cx="646.9446948614432" cy="0.0" r="10" style="fill:rgb(0,0,0);stroke:rgb(0,0,0);stroke-width:5;fill-rule:evenodd;" />


</svg>



<!--
图1(SVG):...
JS代码(JS函数):...
+[新建阅读窗口](,图1)

+[H函数](,代码)
-->
    </mathjax></p>
</div>

<p id="cmd_window">Hello world!</p>
<script>
function print() {
    document.getElementById("cmd_window").innerHTML+="<br>";
    for (var i=0; i < arguments.length; i++) {
        text=arguments[i];
        document.getElementById("cmd_window").innerHTML+=" "+text;
    }
}
</script>
<script>
/*
+[J函数](,JS代码)
*/


function intersection_lines_dir_pt(pt1,theta1,pt2,theta2) {
    X1=[pt1[0],pt1[0]+Math.cos(theta1)];
    Y1=[pt1[1],pt1[1]+Math.sin(theta1)];
    X2=[pt2[0],pt2[0]+Math.cos(theta2)];
    Y2=[pt2[1],pt2[1]+Math.sin(theta2)];

    D1=X1[0]*Y1[1]-X1[1]*Y1[0];
    D2=X2[0]*Y2[1]-X2[1]*Y2[0];
    DX1=X1[1]-X1[0];
    DX2=X2[1]-X2[0];
    DY1=Y1[1]-Y1[0];
    DY2=Y2[1]-Y2[0];
    x0=(D1*DX2-D2*DX1)/(DY1*DX2-DY2*DX1);
    y0=(D1*DY2-D2*DY1)/(DY1*DX2-DY2*DX1);
    return [x0,y0];
}



function draw_update() {
    var line_an_3 = document.getElementById("line_an_3");
    var line_an_2 = document.getElementById("line_an_2");
    var line_an_1 = document.getElementById("line_an_1");
    var pt_4 = document.getElementById("pt_4");
    var pt_4_x = +pt_4.getAttribute("cx");
    var pt_4_y = +pt_4.getAttribute("cy");
    
    var pt_5 = document.getElementById("pt_5");
    var pt_5_x = +pt_5.getAttribute("cx");
    var pt_5_y = +pt_5.getAttribute("cy");
    
    var pt_1 = document.getElementById("pt_1");
    var pt_1_x = +pt_1.getAttribute("cx");
    var pt_1_y = +pt_1.getAttribute("cy");
    
    var pt_6 = document.getElementById("pt_6");
    var pt_6_x = +pt_6.getAttribute("cx");
    var pt_6_y = +pt_6.getAttribute("cy");
    
    var pt_2 = document.getElementById("pt_2");
    var pt_2_x = +pt_2.getAttribute("cx");
    var pt_2_y = +pt_2.getAttribute("cy");
    
    var pt_3 = document.getElementById("pt_3");
    var pt_3_x = +pt_3.getAttribute("cx");
    var pt_3_y = +pt_3.getAttribute("cy");
    
    
    var L_1 = 146.94469486144317;

    // Line direction
    Dx=pt_2_x-pt_3_x;
    Dy=pt_2_y-pt_3_y;
    L=Math.sqrt(Dx**2+Dy**2);
    Dx=Dx/L;
    Dy=Dy/L;
    an_1=Math.acos(Dx)*Math.sign(Dy);
    
    // Line direction
    Dx=pt_4_x-pt_5_x;
    Dy=pt_4_y-pt_5_y;
    L=Math.sqrt(Dx**2+Dy**2);
    Dx=Dx/L;
    Dy=Dy/L;
    an_2=Math.acos(Dx)*Math.sign(Dy);
    
    // Solving the intersection of line_an_1 and line_an_2
    pt1=[pt_3_x,pt_3_y];
    pt2=[pt_5_x,pt_5_y];
    [pt_6_x,pt_6_y]=intersection_lines_dir_pt(pt1,an_1,pt2,an_2);
    
    an_3=2*an_2-an_1;
    
    // Solving coordinates of pt_1
    Dx=L_1*Math.cos(an_3);
    Dy=L_1*Math.sin(an_3);
    pt_1_x=pt_6_x+Dx;
    pt_1_y=pt_6_y+Dy;
    
    

    xs=[pt_1_x, pt_6_x];
    ys=[pt_1_y, pt_6_y];
    for(var i=0;i<line_an_3.points.length;i++) {
        line_an_3.points[i].x=xs[i];
        line_an_3.points[i].y=ys[i];
    }
    
    xs=[pt_6_x, pt_4_x, pt_5_x];
    ys=[pt_6_y, pt_4_y, pt_5_y];
    for(var i=0;i<line_an_2.points.length;i++) {
        line_an_2.points[i].x=xs[i];
        line_an_2.points[i].y=ys[i];
    }
    
    xs=[pt_6_x, pt_2_x, pt_3_x];
    ys=[pt_6_y, pt_2_y, pt_3_y];
    for(var i=0;i<line_an_1.points.length;i++) {
        line_an_1.points[i].x=xs[i];
        line_an_1.points[i].y=ys[i];
    }
    
    pt_4.setAttribute("cx",pt_4_x);
    pt_4.setAttribute("cy",pt_4_y);
    pt_5.setAttribute("cx",pt_5_x);
    pt_5.setAttribute("cy",pt_5_y);
    pt_1.setAttribute("cx",pt_1_x);
    pt_1.setAttribute("cy",pt_1_y);
    pt_6.setAttribute("cx",pt_6_x);
    pt_6.setAttribute("cy",pt_6_y);
    pt_2.setAttribute("cx",pt_2_x);
    pt_2.setAttribute("cy",pt_2_y);
    pt_3.setAttribute("cx",pt_3_x);
    pt_3.setAttribute("cy",pt_3_y);
    
}

var viewer = document.getElementById("viewer");
var ratio_viewer=viewer.getBoundingClientRect().width/1000;

function dragEle(e,name) {
    var x=(e.clientX-viewer.getBoundingClientRect().left)/ratio_viewer;
    var y=(e.clientY-viewer.getBoundingClientRect().top)/ratio_viewer;

    var pt_1 = document.getElementById(name);
    pt_1.setAttribute("cx", x);
    pt_1.setAttribute("cy", y);

    draw_update();
}


// let doAction=function (e) {};
let doAction=function (e) {dragEle(e,'pt_4')};
function onmousedown_diy(e) {
    doAction(e);
}

document.body.addEventListener("mousemove", onmousedown_diy);

document.body.addEventListener("mouseup", function(e) {
    doAction=function(e) {};
});

function loadDragFunc(name) {
    doAction=function(e) {dragEle(e,name)};
}


/*
+[J函数](,JS代码)
*/
</script>

<div class="footer">
  <p>Footer</p>
</div>

</body>
</html>
